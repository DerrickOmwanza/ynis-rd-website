{
  "info": {
    "name": "M-PESA Debt Allocation API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone_number\": \"+254701234567\",\n  \"full_name\": \"John Borrower\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/api/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Login User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/users/profile",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "users", "profile"]
            }
          }
        },
        {
          "name": "Add Funds to Wallet",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 5000\n}"
            },
            "url": {
              "raw": "http://localhost:5000/api/users/wallet/add-funds",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "users", "wallet", "add-funds"]
            }
          }
        }
      ]
    },
    {
      "name": "Loans",
      "item": [
        {
          "name": "Request Loan",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer BORROWER_TOKEN"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lender_phone\": \"+254702345678\",\n  \"principal_amount\": 5000,\n  \"repayment_method\": \"fixed\",\n  \"repayment_amount\": 500,\n  \"repayment_start_date\": \"2025-12-01\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/api/loans/request",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "loans", "request"]
            }
          }
        },
        {
          "name": "Approve Loan",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer LENDER_TOKEN"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"approved\": true\n}"
            },
            "url": {
              "raw": "http://localhost:5000/api/loans/LOAN_ID/approval",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "loans", "LOAN_ID", "approval"]
            }
          }
        },
        {
          "name": "Get Borrower Loans",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/loans/borrower",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "loans", "borrower"]
            }
          }
        },
        {
          "name": "Get Lender Loans",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/loans/lender",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "loans", "lender"]
            }
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "item": [
        {
          "name": "Simulate Incoming Transaction",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer BORROWER_TOKEN"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 1000,\n  \"source_phone\": \"+254705555555\",\n  \"description\": \"Payment from client\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/api/transactions/incoming",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "transactions", "incoming"]
            }
          }
        },
        {
          "name": "Get Transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/transactions",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "transactions"]
            }
          }
        }
      ]
    },
    {
      "name": "Repayments",
      "item": [
        {
          "name": "Get Loan Repayments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/repayments/loan/LOAN_ID",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "repayments", "loan", "LOAN_ID"]
            }
          }
        },
        {
          "name": "Get All Borrower Repayments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/repayments/borrower/all",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "repayments", "borrower", "all"]
            }
          }
        },
        {
          "name": "Get All Lender Repayments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/repayments/lender/all",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "repayments", "lender", "all"]
            }
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/notifications",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "notifications"]
            }
          }
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/notifications/NOTIFICATION_ID/read",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "notifications", "NOTIFICATION_ID", "read"]
            }
          }
        },
        {
          "name": "Get Unread Count",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/api/notifications/unread/count",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["api", "notifications", "unread", "count"]
            }
          }
        }
      ]
    }
  ]
}
